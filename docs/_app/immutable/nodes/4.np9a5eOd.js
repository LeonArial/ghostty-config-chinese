import"../chunks/CWj6FrbW.js";import{W as ot,X as nt,Y as it,Z as $,_ as E,$ as i,a0 as s,a1 as P,a2 as p,j as l,a3 as W,a4 as T,a5 as X,a6 as ct,a7 as o,a8 as h,a9 as lt}from"../chunks/B6cOdPib.js";import{e as Y,i as Z}from"../chunks/1ID_ZJf9.js";import{i as dt}from"../chunks/O6Ny3poz.js";import{b as vt}from"../chunks/C3aWv6SF.js";import{P as pt}from"../chunks/Bw1wt3Bu.js";import{G as ut,S as q}from"../chunks/B1hYRqp3.js";import{I as z}from"../chunks/BeAR8c85.js";import{p as ft,l as _t,d as B}from"../chunks/C5rYfHQm.js";var ht=$('<div class="row svelte-cc2h5d"><span class="p4 svelte-cc2h5d"> </span> = <span class="p5 svelte-cc2h5d"> </span></div>'),mt=$('<div class="row svelte-cc2h5d"><span class="p4 svelte-cc2h5d"> </span> = <span class="p5 svelte-cc2h5d"> </span></div>'),bt=$('<div class="button-group svelte-cc2h5d"><button type="button" title="粘贴" class="svelte-cc2h5d"> </button> <input id="config-input" type="file" class="svelte-cc2h5d"/> <button type="button" title="上传" class="svelte-cc2h5d">文件...</button></div>'),gt=$('<div class="button-group svelte-cc2h5d"><button type="button" title="复制" class="svelte-cc2h5d"> </button> <button type="button" title="下载" class="svelte-cc2h5d">文件...</button></div>'),yt=$('<div class="preview svelte-cc2h5d"><div class="row p2 svelte-cc2h5d"># 你可以在这里预览配置</div> <div class="row svelte-cc2h5d">&nbsp;</div> <!></div> <!> <!> <!> <!>',1);function Gt(D,J){nt(J,!0);let x=W("剪贴板"),k=W("剪贴板");function F(t){let e;try{e=ft(t)}catch(a){console.error(a),alert("解析配置时出错。请在 GitHub 上提交 Issue！");return}try{_t(e)}catch(a){console.error(a),alert("加载解析后的配置时出错。请在 GitHub 上提交 Issue！");return}}function K(){l(x)!=="已粘贴！"&&window.navigator.clipboard.readText().then(t=>{T(x,"已粘贴！"),setTimeout(()=>T(x,"剪贴板"),3e3),F(t)})}let w;function M(){w.click()}function N(){const t=w.files[0],e=new FileReader;e.addEventListener("load",a=>{var m,u;const d=(u=(m=a.target)==null?void 0:m.result)==null?void 0:u.toString();d&&F(d)}),e.readAsText(t)}function I(){const t=B(),e=[`# Config generated by Ghostty Config
`];for(const a in t)if(!Array.isArray(t[a]))e.push(`${a} = ${t[a]}`);else for(let d=0;d<t[a].length;d++)e.push(`${a} = ${t[a][d]}`);return e.join(`
`)}function Q(){if(l(k)==="已复制！")return;const t=I();window.navigator.clipboard.writeText(t).then(()=>{T(k,"已复制！"),setTimeout(()=>T(k,"剪贴板"),3e3)})}function V(){const t=new File([I()],"config",{type:"text/plain"}),e=document.createElement("a"),a=URL.createObjectURL(t);e.href=a,e.download=t.name,e.style.display="none",document.body.append(e),e.click(),e.remove(),URL.revokeObjectURL(a)}pt(D,{title:"导入 & 导出",children:(t,e)=>{ut(t,{flex:1,children:(a,d)=>{var m=yt(),u=E(m),tt=i(s(u),4);Y(tt,17,()=>Object.entries(B()),Z,(b,j)=>{var n=ct(()=>lt(l(j),2));let r=()=>l(n)[0],v=()=>l(n)[1];var c=X(),A=E(c);{var G=f=>{var _=X(),g=E(_);Y(g,17,v,Z,(L,C)=>{var y=ht(),R=s(y),rt=s(R,!0);o(R);var H=i(R,2),st=s(H,!0);o(H),o(y),P(()=>{h(rt,r()),h(st,l(C))}),p(L,y)}),p(f,_)},at=f=>{var _=mt(),g=s(_),L=s(g,!0);o(g);var C=i(g,2),y=s(C,!0);o(C),o(_),P(()=>{h(L,r()),h(y,v())}),p(f,_)};dt(A,f=>{Array.isArray(v())?f(G):f(at,!1)})}p(b,c)}),o(u);var U=i(u,2);q(U);var O=i(U,2);z(O,{name:"导入",children:(b,j)=>{var n=bt(),r=s(n);r.__click=K;var v=s(r,!0);o(r);var c=i(r,2);c.__change=N,vt(c,G=>w=G,()=>w);var A=i(c,2);A.__click=M,o(n),P(()=>h(v,l(x))),p(b,n)},$$slots:{default:!0}});var S=i(O,2);q(S);var et=i(S,2);z(et,{name:"导出",children:(b,j)=>{var n=gt(),r=s(n);r.__click=Q;var v=s(r,!0);o(r);var c=i(r,2);c.__click=V,o(n),P(()=>h(v,l(k))),p(b,n)},$$slots:{default:!0}}),p(a,m)},$$slots:{default:!0}})},$$slots:{default:!0}}),it()}ot(["click","change"]);export{Gt as component};
